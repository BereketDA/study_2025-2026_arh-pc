---
## Author
author:
  name: Кебеде Берекет Дагне
  group: НПИбд-01-25
  email: 1032255864@pfur.ru
  affiliation:
    - name: Российский университет дружбы народов
      country: Российская Федерация
      postal-code: 117198
      city: Москва
      address: ул. Миклухо-Маклая, д. 6

## Title
title: "Отчет по лабораторной работе №4"
subtitle: "Архитектура компьютера"
license: "CC BY"
---

# Цель работы

Целью работы является освоение процедуры компиляции и сборки программ, написанных на ассемблере NASM.

# Выполнение лабораторной работы

В @tbl-commands приведены основные команды, используемые при работе с NASM и компоновщиком LD.

: Основные команды, используемые при выполнении работы {#tbl-commands}

| Команда | Флаги | Описание |
|---------|-------|----------|
| `nasm` | `-f elf` | Компиляция в формате ELF |
| `nasm` | `-o obj.o -f elf -g -l list.lst` | Расширенная компиляция с отладочной информацией и листингом |
| `ld` | `-m elf_i386 -o hello` | Компоновка 32-битного исполняемого файла |

## Программа Hello world!

Создадим каталог для работы с программами на языке ассемблера NASM:

```bash
mkdir -p ~/work/arch-pc/lab04
cd ~/work/arch-pc/lab04
```
Создадим текстовый файл hello.asm с программой Hello World:

``` asm
; hello.asm
SECTION .data
hello: DB 'Hello world!',10
helloLen: EQU $-hello

SECTION .text
GLOBAL _start

_start:
mov eax,4
mov ebx,1
mov ecx,hello
mov edx,helloLen
int 80h

mov eax,1
mov ebx,0
int 80h```

## Транслятор NASM

Выполним компиляцию программы:
``` bash
nasm -f elf hello.asm
```
![Компиляция hello.asm](image/step1-compile-hello.png){#fig-001 width=90%}

## Расширенный синтаксис командной строки NASM

Выполним расширенную компиляцию:

```bash
nasm -o obj.o -f elf -g -l list.lst hello.asm
```
![Расширенная компиляция NASM](image/step2-extended-compile.png){#fig-002 width=90%}

## Компоновщик LD

Создадим исполняемые файлы:
```bash
ld -m elf_i386 hello.o -o hello
ld -m elf_i386 obj.o -o main
```
![Компоновка с LD](image/step3-linking.png){#fig-003 width=90%}

## Запуск исполняемого файла

Запустим созданные программы:

```bash
./hello
./main
```
![Запуск программ Hello World](image/step4-running.png){#fig-004 width=90%}

## Задание для самостоятельной работы

## Создание модифицированной программы

Создадим копию файла hello.asm и модифицируем её:

```bash
cp hello.asm lab4.asm
```
Изменим строку вывода на своё имя:
```asm
hello: DB 'Кебеде Берекет',10
```
## Компиляция и запуск модифицированной программы

```bash
nasm -f elf lab4.asm
ld -m elf_i386 lab4.o -o lab4
./lab4
```
![Создание и компиляция lab4.asm](image/step5-custom-program.png){#fig-005 width=90%}

## Копирование файлов в репозиторий

```bash
cp hello.asm lab4.asm ~/work/study/2025-2026/"Архитектура компьютера"/arch-pc/labs/lab04/
```
![Копирование файлов в репозиторий](image/step6-copy-files.png){#fig-006 width=90%}

## Выводы

В ходе выполнения лабораторной работы были освоены основные этапы создания программ на языке ассемблера NASM: написание исходного кода, трансляция с помощью NASM, компоновка объектного файла с использованием ld и запуск исполняемого файла. Были изучены основные команды ассемблера и системные вызовы Linux для организации ввода-вывода. Цель работы достигнута - освоена процедура компиляции и сборки программ на ассемблере NASM.

::: {#refs}
:::
